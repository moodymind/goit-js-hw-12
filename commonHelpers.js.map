{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44068350-6653723470485442d70381dc3';\n\nexport async function searchImage(query, page = 1) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  const url = `${BASE_URL}?${params}`;\n  const response = await axios.get(url);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nexport function addImages(images) {\n  const imageMarkup = images\n    .map(image => {\n      return `<li class='image-card'>\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"gallery-image\">\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: ${image.likes}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Views: ${image.views}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: ${image.comments}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: ${image.downloads}</b>\n          </p>\n        </div>\n      </li>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageMarkup);\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function imageGalleryLightbox() {\n  let lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    overlay: true,\n    overlayOpacity: 0.8,\n  });\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImage } from './js/pixabay-api.js';\nimport {\n  addImages,\n  clearGallery,\n  imageGalleryLightbox,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.image-search-form');\nconst loader = document.querySelector('.loading-indicator');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nloadMoreBtn.style.display = 'none';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  clearGallery();\n  currentQuery = event.target.elements.inputSearch.value.trim();\n  currentPage = 1;\n\n  if (!currentQuery) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search field cannot be empty. Please enter your query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const data = await searchImage(currentQuery, currentPage);\n    if (!data.hits.length) {\n      iziToast.error({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        messageColor: '#FAFAFB',\n        color: '#EF4040',\n        position: 'topRight',\n      });\n    } else {\n      setTimeout(() => {\n        addImages(data.hits);\n        imageGalleryLightbox();\n        loadMoreBtn.style.display = data.totalHits > 15 ? 'block' : 'none';\n      }, 2000);\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `An error occurred: ${error.message}`,\n      messageColor: '#FAFAFB',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    setTimeout(hideLoader, 2000);\n  }\n  form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await searchImage(currentQuery, currentPage);\n    if (!data.hits.length) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FAFAFB',\n        color: '#17A2B8',\n        position: 'topRight',\n      });\n    } else {\n      addImages(data.hits);\n      imageGalleryLightbox();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `An error occurred: ${error.message}`,\n      messageColor: '#FAFAFB',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n\n  smoothScroll();\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["BASE_URL","API_KEY","searchImage","query","page","params","url","axios","gallery","addImages","images","imageMarkup","image","clearGallery","imageGalleryLightbox","SimpleLightbox","form","loader","loadMoreBtn","currentPage","currentQuery","event","iziToast","showLoader","data","error","hideLoader","smoothScroll","cardHeight"],"mappings":"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"}